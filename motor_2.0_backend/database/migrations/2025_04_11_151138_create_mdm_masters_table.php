<?php

use App\Models\MdmMaster;
use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\DB;
use Illuminate\Support\Facades\Schema;

class CreateMdmMastersTable extends Migration
{
    /**
     * Run the migrations.
     *
     * @return void
     */
    public function up()
    {
       
        if(!Schema::hasTable('mdm_master'))
        {
        Schema::create('mdm_master', function (Blueprint $table) {
            $table->id();
            $table->string('mdm_allowed_table')->unique();
            $table->timestamp('created_at')->nullable();
            $table->timestamp('updated_at')->nullable();
        });
        }

        // Seeding the allowed tables
        $allowedTables = [
            "pcv_t_rto_location_cmv",
            "bajaj_allianz_motor_state_city_master",
            "bike_applicable_addons",
            "bike_future_generali_cashless_garage",
            "bike_godigit_cashless_garage",
            "bike_hdfc_ergo_cashless_garage",
            "bike_iffco_tokio_cashless_garage",
            "bike_liberty_videocon_cashless_garage",
            "bike_usp",
            "car_applicable_addons",
            "car_future_generali_cashless_garage",
            "car_hdfc_ergo_cashless_garage",
            "car_liberty_videocon_cashless_garage",
            "car_shriram_cashless_garage",
            "car_tata_aig_cashless_garage",
            "pcv_shriram_cashless_garage",
            "car_usp",
            "cholla_mandalam_car_cashless_garage",
            "cholla_mandalam_financier_master",
            "cholla_mandalam_pincode_master",
            "cholla_mandalam_previous_insurer_master",
            "cholla_mandalam_relation_master",
            "common_financier_master",
            "cpa_tenure",
            "cv_applicable_addons",
            "cv_hdfc_ergo_rto_location",
            "edelweiss_car_cashless_garage",
            "edelweiss_finance_master",
            "edelweiss_pincode_master",
            "edelweiss_previous_insurance_master",
            "fastlane_previous_ic_mapping",
            "fastlane_cv_vehicle_description",
            "fastlane_vehicle_description",
            "fg_car_addon_configuration",
            "financier_agreement_type",
            "future_generali_car_cashless_garage",
            "future_generali_cashless_garage",
            "future_generali_pincode_master",
            "future_generali_prev_insurer",
            "future_generali_previous_tp_insurer_master",
            "fyntune_previous_insurer_master",
            "gcv_applicable_addons",
            "miscd_applicable_addons",
            "gcv_usp",
            "gender",
            "godigit_pincode_state_city_master",
            "hdfc_ergo_car_cashless_garage",
            "hdfc_ergo_cashless_garage",
            "hdfc_ergo_financier_master",
            "hdfc_ergo_motor_city_master",
            "hdfc_ergo_motor_pincode_master",
            "hdfc_ergo_motor_state_master",
            "hdfc_ergo_rto_master",
            "hdfc_ergo_v2_financier_master",
            "hdfc_ergo_v2_motor_city_master",
            "hdfc_ergo_v2_motor_pincode_master",
            "hdfc_ergo_v2_motor_state_master",
            "hdfc_ergo_v2_single_pincode_master",
            "ic_error_handlings",
            "ic_credentials",
            "ic_product",
            "icici_lombard_addons_validation",
            "icici_lombard_city_disctrict_master",
            "icici_lombard_pincode_master",
            "icici_lombard_rto_location_motor",
            "icici_lombard_state_master",
            "icici_rto_allowed_cities",
            "icici_rto_master",
            "iffco_pincode_master",
            "iffco_tokio_address_city_master",
            "iffco_tokio_financier_master",
            "iffco_tokio_pincode_master",
            "iffco_tokio_state_master",
            "insurer_address",
            "kotak_financier_master",
            "kotak_pincode_master",
            "liberty_videocon_cashless_garage",
            "liberty_videocon_city_master",
            "liberty_videocon_financier_master",
            "liberty_videocon_pincode_master",
            "liberty_videocon_state_master",
            "loss_of_personal_belonging_si_values",
            "magma_city_master",
            "magma_financier_master",
            "magma_motor_city_master",
            "magma_motor_pincode_master",
            "magma_motor_state_master",
            "magma_vehicle_price_master",
            "magma_bike_price_masters",
            "master_city",
            "master_motor_addons",
            "master_occupation",
            "master_organization_types",
            "misc_usp",
            "miscd_hdfc_ergo_rto_location",
            "miscd_hdfc_ergo_state_master",
            "motor_idv",
            "motor_ncb",
            "motor_tariff",
            "new_india_color_masters",
            "new_india_motor_discount_grid",
            "new_india_pincode_master",
            "nic_district_master",
            "nic_financier_master",
            "nic_occupation_master",
            "nic_pincode_master",
            "nic_prev_comp_master",
            "nic_previous_insurer_master",
            "nic_state_master",
            "nic_vehicle_color_master",
            "nominee_relationship",
            "oriental_idv_master",
            "oriental_non_maruti_discount_grid",
            "oriental_pinstatecity_master",
            "oriental_state_city_pincode_master",
            "oriental_vehicle_master",
            "pcv_applicable_addons",
            "pcv_usp",
            "previous_insurer_lists",
            "previous_insurer_mappping",
            "proposal_ic_error_handlings",
            "quote_visibility_not_a_failure_error_messages",
            "raheja_financier_name_master",
            "raheja_motor_pincode_master",
            "raheja_rto_location",
            "raheja_state_master",
            "rb_ic_intermediary_codes",
            "rc_number_block_data",
            "reliance_pincode_state_city_master",
            "royal_sudaram_travel_occupation_master",
            "royal_sundaram_bike_model_master",
            "royal_sundaram_motor_state_city_master",
            "royal_sundaram_pincode_city_state_master",
            "royal_sundaram_pincode_master",
            "royal_sundaram_pincode_state_city_master",
            "royal_sundaram_prev_insurer",
            "royal_sundaram_state_mapping_with_bajaj_master",
            "rto_preferred_city",
            "sbi_colors",
            "sbi_gcv_model_master",
            "sbi_motor_city_master",
            "sbi_motor_state_master",
            "sbi_pincode_state_city_master",
            "shriram_cashless_garage",
            "shriram_financier_master",
            "shriram_pin_city_state",
            "shriram_rto_location",
            "tata_aig_body_type_master",
            "tata_aig_cashless_garage",
            "tata_aig_finance_master",
            "tata_aig_model_master",
            "tata_aig_pincode_master",
            "tata_aig_v2_city_master",
            "tata_aig_v2_pincode_master",
            "tata_aig_v2_state_master",
            "tata_aig_vehicle_class_master",
            "united_idv_percentages",
            "united_india_car_discount_grid",
            "united_india_financier_branch_masters",
            "united_india_financier_master",
            "united_india_model_master",
            "united_india_occupation_master",
            "united_india_pincode_state_city_master",
            "united_india_previous_insurer_master",
            "united_india_other_models_discount_new_grid",
            "united_india_without_ncb_updated_discount_grid",
            "united_india_with_ncb_updated_discount_grid",
            "universal_sompo_bike_addon_configuration",
            "universal_sompo_car_addon_configuration",
            "universal_sompo_city_master",
            "universal_sompo_ex_showroom_price",
            "universal_sompo_pincode_master",
            "universal_sompo_state_master",
            "usgi_color_masters",
            "vehicle_block_data",
            "vehicle_usage_types",
            "voluntary_deductible",
            "bajaj_allianz_master_rto",
            "bharti_axa_rto_location",
            "bike_icici_lombard_rto_location",
            "car_icici_lombard_rto_location",
            "cholla_mandalam_bike_rto_master",
            "cholla_mandalam_cv_rto_master",
            "cholla_mandalam_rto_master",
            "edelweiss_rto_master",
            "future_generali_rto_master",
            "fyntune_city_master",
            "fyntune_rto_master",
            "gcv_icici_lombard_rto_master",
            "godigit_rto_location",
            "hdfc_ergo_bike_rto_location",
            "hdfc_ergo_rto_location",
            "icici_lombard_rto_master",
            "iffco_tokio_city_master",
            "iffco_tokio_rto_location_master",
            "kotak_bike_rto_location",
            "kotak_rto",
            "kotak_rto_location",
            "liberty_videocon_rto_master",
            "magma_rto_location",
            "master_rto",
            "master_state",
            "new_india_rto_master",
            "nic_rto_master",
            "oriental_rto_master",
            "pcv_icici_lombard_rto_master",
            "reliance_rto_master",
            "royal_sundaram_rto_master",
            "sbi_bike_rto_location",
            "sbi_rto_location",
            "tata_aig_v2_rto_master",
            "tata_aig_vehicle_rto_location_master",
            "tmp_rto_bike_icici",
            "tmp_rto_icici",
            "tmp_rto_iffco",
            "tmp_rto_update",
            "united_india_rto_master",
            "universal_sompo_rto_master",
            "ic_integration_type",
            "ic_version_configurators",
            "tata_aig_v2_special_regno_pcv"
        ];

        $now = now();
        foreach ($allowedTables as $tableName) {
            MdmMaster::insert([
                'mdm_allowed_table' => $tableName,
                'created_at' => $now,
                'updated_at' => $now,
            ]);
        }
    }

    /**
     * Reverse the migrations.
     *
     * @return void
     */
    public function down()
    {
        Schema::dropIfExists('mdm_masters');
    }
}
